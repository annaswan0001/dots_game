(this.webpackJsonpdots_game=this.webpackJsonpdots_game||[]).push([[0],{65:function(e,t,a){e.exports=a(94)},70:function(e,t,a){},88:function(e,t,a){},92:function(e,t,a){},93:function(e,t,a){},94:function(e,t,a){"use strict";a.r(t);var n=a(12),r=a(0),i=a.n(r),c=a(8),l=a.n(c),s=(a(70),a(6)),u={SET_WINNERS:"SET_WINNERS",SET_SETTINGS:"SET_SETTINGS",SET_USERNAME:"SER_USERNAME",SET_DELAY:"SET_DELAY",SET_FIELD_SIZE:"SET_FIELD_SIZE",SET_FIELD_ARRAY:"SET_FIELD_ARRAY",START_GAME:"START_GAME",FINISH_GAME:"FINISH_GAME",SET_GAME_PERMISSION:"SET_GAME_PERMISSION",CLICK_SQUARE:"CLICK_SQUARE",SET_SQUARE_BLUE:"SET_SQUARE_BLUE",SET_SQUARE_RED:"SET_SQUARE_RED"},o=i.a.createContext({settings:null,field:[],delay:null,size:null,isGameStart:!1,isGameFinish:!1,winners:null,winner:""});var E=function(e,t){switch(t.type){case u.SET_SETTINGS:return Object(s.a)(Object(s.a)({},e),{},{settings:t.payload});case u.SET_GAME_DELAY:return Object(s.a)(Object(s.a)({},e),{},{delay:t.payload});case u.SET_FIELD_SIZE:return Object(s.a)(Object(s.a)({},e),{},{size:t.payload});case u.SET_WINNERS:return Object(s.a)(Object(s.a)({},e),{},{winners:t.payload});case u.SET_FIELD_ARRAY:return Object(s.a)(Object(s.a)({},e),{},{field:t.payload});case u.START_GAME:return Object(s.a)(Object(s.a)({},e),{},{isGameStart:!0});case u.FINISH_GAME:return Object(s.a)(Object(s.a)({},e),{},{isGameFinish:!0,isGameStart:!1,winner:t.payload});case u.SET_GAME_PERMISSION:return Object(s.a)(Object(s.a)({},e),{},{isGameFinish:!1,winner:""});case u.CLICK_SQUARE:return e.field[t.payload].isBlueSquare?Object(s.a)(Object(s.a)({},e),{},{field:e.field.map((function(e,a){return a===t.payload?Object(s.a)(Object(s.a)({},e),{},{isBlueSquare:!1,isGreenSquare:!0,disabled:!0}):e}))}):e;case u.SET_SQUARE_RED:return Object(s.a)(Object(s.a)({},e),{},{field:e.field.map((function(e){return e.id===t.payload?Object(s.a)(Object(s.a)({},e),{},{isBlueSquare:!1,isRedSquare:!0,isDisabled:!0}):e}))});case u.SET_SQUARE_BLUE:return Object(s.a)(Object(s.a)({},e),{},{field:e.field.map((function(e){return e.id===t.payload?Object(s.a)(Object(s.a)({},e),{},{isBlueSquare:!0,isRedSquare:!1,isAvailable:!1}):e}))});default:throw new Error}},d=a(11),m=a(125),f=a(134),S=a(128),b=a(32),p=a.n(b),_=p.a.create({baseURL:"https://starnavi-frontend-test-task.herokuapp.com/"});a(88);var O=a(55),j=a.n(O),g=function(e){var t=e.isGreenSquare,a=e.isRedSquare,n=e.isBlueSquare,r=e.onClick,c=e.size,l=j()({btn:!0,"btn-blue":n,"btn-red":a,"btn-green":t,"btn-small":5===c,"btn-medium":10===c,"btn-large":15===c});return i.a.createElement("button",{onClick:r,className:l})},y=Object(m.a)((function(e){return{center:{margin:"0 auto"}}}));var v=function(){var e=Object(r.useContext)(o),t=e.state,a=e.dispatch,c=t.size,l=t.field,s=Object(r.useState)(window.innerWidth>576),E=Object(n.a)(s,2),d=E[0],m=E[1],f=y(),b=function(){m(window.innerWidth>576)};Object(r.useEffect)((function(){return window.addEventListener("resize",b),function(){return window.removeEventListener("resize",b)}}));var p=Object(r.useCallback)((function(e){a({type:u.CLICK_SQUARE,payload:e})}),[a]),_=Object(r.useMemo)((function(){return l.map((function(e,t){return(t+1)%c===0?i.a.createElement(i.a.Fragment,{key:e.id},i.a.createElement(g,Object.assign({key:e.id},e,{size:c,onClick:function(){return p(t)}})),i.a.createElement("p",null)):i.a.createElement(g,Object.assign({size:c,key:e.id},e,{onClick:function(){return p(t)}}))}))}),[l,c,p]),O=Object(r.useMemo)((function(){return l.map((function(e,t){return i.a.createElement(i.a.Fragment,{key:e.id},i.a.createElement(g,Object.assign({key:e.id},e,{size:c,onClick:function(){return p(t)}})))}))}),[l,p,c]),j=Object(r.useMemo)((function(){return d||15!==c?_:O}),[d,c,O,_]);return i.a.createElement(S.a,{classes:{item:f.center},item:!0},i.a.createElement("div",null," ",j))};a(92);var A=function(e){var t=e.winner;return i.a.createElement("div",{className:"leaders_item"},i.a.createElement("div",{className:"leaders_item-row"},i.a.createElement("p",null," ",t.winner),i.a.createElement("p",null,t.date)))},T=function(e){var t=e.winners;return i.a.createElement("div",{className:"leaders"},i.a.createElement("h1",{className:"leaders_title"},"Leader Board"),t&&t.map((function(e,t){return i.a.createElement(A,{key:e.id,winner:e})})))},I=a(17),R=a(130),h=a(136),w=a(135),N=a(132),M=a(138),G=a(139),C=a(133),k=a(39),x=a.n(k);var D=Object(m.a)((function(e){return{formControl:{width:"100%"},input:{padding:"23px 12px 6px",minWidth:"145px",textAlign:"left"},label:{transform:"translate(12px, 18px) scale(1)"},button:Object(d.a)({padding:"12px 50px",color:"#fff",backgroundColor:x.a[800],"&:hover":{backgroundColor:x.a[900]}},e.breakpoints.down("md"),{width:"100%"}),buttonDisabled:{backgroundColor:"#7B8D93 !important",color:"#fff !important"}}})),L=function(e){for(var t=[],a=0;a<e*e;a++){var n={id:a,isGreenSquare:!1,isRedSquare:!1,isBlueSquare:!1,isAvailable:!0,isDisabled:!1};t.push(n)}return t};var F=function(){var e=D(),t=Object(r.useContext)(o),a=t.state,c=t.dispatch,l=Object(r.useState)(""),s=Object(n.a)(l,2),E=s[0],d=s[1],m=Object(r.useState)(""),f=Object(n.a)(m,2),b=f[0],p=f[1],O=a.settings,j=a.isGameStart,g=a.size,y=a.field,v=a.delay,A=a.isGameFinish,T=a.winner;return Object(r.useEffect)((function(){E&&(c({type:u.SET_FIELD_SIZE,payload:O[E].field}),c({type:u.SET_GAME_DELAY,payload:O[E].delay}),c({type:u.SET_GAME_PERMISSION}))}),[E,c,O]),Object(r.useEffect)((function(){if(g){var e=L(g);c({type:u.SET_FIELD_ARRAY,payload:e})}}),[g,c]),Object(r.useEffect)((function(){if(j&&A){var e=L(g);c({type:u.SET_FIELD_ARRAY,payload:e}),c({type:u.SET_GAME_PERMISSION,payload:""})}}),[j,g,A,c]),Object(r.useEffect)((function(){var e;if(j&&!A){e=setInterval((function e(){var t=Object(I.a)(y),a=t.filter((function(e){return e.isBlueSquare})),n=t.filter((function(e){return e.isGreenSquare})),r=t.filter((function(e){return e.isRedSquare})),i=t.filter((function(e){return e.isAvailable}));if(a.length){var l=a[0].id;c({type:u.SET_SQUARE_RED,payload:l})}if(n.length===Math.round(g*g/2))clearInterval(e),c({type:u.FINISH_GAME,payload:b});else if(r.length===Math.round(g*g/2))clearInterval(e),c({type:u.FINISH_GAME,payload:"Computer"});else if(i.length){var s=i[Math.floor(Math.random()*i.length)].id;c({type:u.SET_SQUARE_BLUE,payload:s})}}),v)}return function(){clearTimeout(e)}}),[j,A,g,c,b,v,y]),Object(r.useEffect)((function(){if(A){var e=function(){var e=new Date,t=e.toLocaleDateString("en-US",{month:"long",year:"numeric"});return"".concat(e.getHours(),":").concat((e.getMinutes()<10?"0":"")+e.getMinutes(),"; ").concat(("0"+e.getDate()).slice(-2)," ").concat(t)}();(function(e,t){return _.post("/winners",{winner:e,date:t})})(T,e).then((function(e){return c({type:u.SET_WINNERS,payload:e.data.reverse()})}))}}),[A,c,T]),i.a.createElement(i.a.Fragment,null,i.a.createElement(S.a,{item:!0,xs:12,sm:6,lg:4},i.a.createElement(R.a,{variant:"filled",className:e.formControl},i.a.createElement(h.a,{classes:{root:e.label},id:"select-mode-label"},"Pick game mode"),i.a.createElement(w.a,{input:i.a.createElement(N.a,{classes:{input:e.input}}),labelId:"select-mode-label",id:"select-mode",value:E,label:"Pick game mode",disabled:j,onChange:function(e){return d(e.target.value)}},a.settings&&Object.keys(a.settings).map((function(e,t){return i.a.createElement(M.a,{key:e,value:e},e)}))))),i.a.createElement(S.a,{xs:12,sm:6,item:!0,lg:4},i.a.createElement(R.a,{className:e.formControl},i.a.createElement(G.a,{error:b.length>=10,size:"small",label:"Enter your name",variant:"filled",onChange:function(e){return p(e.target.value)},disabled:j,value:b,helperText:"Max 10 length"}))),i.a.createElement(S.a,{xs:12,sm:6,md:12,item:!0,justify:"center",container:!0,lg:4},i.a.createElement(C.a,{onClick:function(){return c({type:u.START_GAME})},classes:{root:e.button,disabled:e.buttonDisabled,contained:e.buttonDisabled},color:"primary",className:e.button,disabled:!E||!b||j||b.length>=10},A?"Play again":"Play")),i.a.createElement(S.a,{item:!0,xs:12},T&&i.a.createElement("h3",{style:{textAlign:"center"}}," ",T," win! ")))},U=(a(93),new Array(10).fill("element"));function q(){return i.a.createElement("div",{className:"loader"},U&&U.map((function(e,t){return i.a.createElement("span",{key:t,className:"loader-block"})})))}var B=Object(m.a)((function(e){return{mainGrid:Object(d.a)({padding:e.spacing(1),border:"2px solid #E7E7E9",minHeight:"100vh",paddingTop:"10%"},e.breakpoints.up("md"),{padding:e.spacing(6)})}}));var Q=function(){var e=B(),t=Object(r.useState)(!1),a=Object(n.a)(t,2),c=a[0],l=a[1],s=Object(r.useState)(!1),E=Object(n.a)(s,2),d=E[0],m=E[1],b=Object(r.useContext)(o),O=b.state,j=b.dispatch,g=O.winners;Object(r.useEffect)((function(){m(!1),l(!0),p.a.all([_.get("/game-settings"),_.get("/winners")]).then(p.a.spread((function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];var n=t[0],r=t[1];j({type:u.SET_SETTINGS,payload:n.data}),j({type:u.SET_WINNERS,payload:r.data.reverse()})}))).catch((function(e){m(!0)})).finally((function(){return l(!1)}))}),[j]);var y=Object(r.useMemo)((function(){return i.a.createElement(T,{winners:g})}),[g]);return i.a.createElement(f.a,{maxWidth:"xl"},i.a.createElement("main",null,d?"Something go wrong":null,c?i.a.createElement(q,null):i.a.createElement(S.a,{className:e.mainGrid,container:!0,direction:"row",alignItems:"flex-start",spacing:2},i.a.createElement(S.a,{justify:"center",container:!0,item:!0,spacing:2,alignItems:"flex-start",md:6},i.a.createElement(F,null),i.a.createElement(v,null)),i.a.createElement(S.a,{container:!0,alignItems:"center",item:!0,md:6},y))))},z=function(){var e=Object(r.useContext)(o),t=Object(r.useReducer)(E,e),a=Object(n.a)(t,2),c=a[0],l=a[1];return i.a.createElement(o.Provider,{value:{state:c,dispatch:l}},i.a.createElement(Q,null))};l.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(z,null)),document.getElementById("root"))}},[[65,1,2]]]);
//# sourceMappingURL=main.b26ed751.chunk.js.map