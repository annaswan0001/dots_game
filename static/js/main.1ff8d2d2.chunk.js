(this.webpackJsonpdots_game=this.webpackJsonpdots_game||[]).push([[0],{66:function(e,t,a){e.exports=a(96)},71:function(e,t,a){},90:function(e,t,a){},94:function(e,t,a){},95:function(e,t,a){},96:function(e,t,a){"use strict";a.r(t);var n=a(17),r=a(0),i=a.n(r),c=a(8),l=a.n(c),s=(a(71),a(6)),o={REQUEST_DATA:"REQUEST_DATA",ERROR_DATA:"ERROR_DATA",SET_WINNERS:"SET_WINNERS",SET_SETTINGS:"SET_SETTINGS",SET_USER:"SET_USER",SET_MODE:"SET_MODE",SET_DELAY:"SET_DELAY",SET_FIELD_SIZE:"SET_FIELD_SIZE",SET_FIELD_ARRAY:"SET_FIELD_ARRAY",START_GAME:"START_GAME",FINISH_GAME:"FINISH_GAME",SET_GAME_PERMISSION:"SET_GAME_PERMISSION",CLICK_SQUARE:"CLICK_SQUARE",SET_SQUARE_BLUE:"SET_SQUARE_BLUE",SET_SQUARE_RED:"SET_SQUARE_RED"},u=i.a.createContext({isLoading:!1,isError:!1,settings:null,user:"",mode:"",field:[],delay:null,size:null,isGameStart:!1,isGameFinish:!1,winners:null,winner:""});var E=function(e,t){switch(t.type){case o.REQUEST_DATA:return Object(s.a)(Object(s.a)({},e),{},{isLoading:!0,isError:!1});case o.ERROR_DATA:return Object(s.a)(Object(s.a)({},e),{},{isError:!0,isLoading:!1});case o.SET_SETTINGS:return Object(s.a)(Object(s.a)({},e),{},{settings:t.payload.settings,winners:t.payload.winners,isLoading:!1});case o.SET_USER:return Object(s.a)(Object(s.a)({},e),{},{user:t.payload});case o.SET_MODE:return Object(s.a)(Object(s.a)({},e),{},{mode:t.payload,size:e.settings[t.payload].field,delay:e.settings[t.payload].delay});case o.SET_GAME_DELAY:return Object(s.a)(Object(s.a)({},e),{},{delay:t.payload});case o.SET_FIELD_SIZE:return Object(s.a)(Object(s.a)({},e),{},{size:t.payload});case o.SET_WINNERS:return Object(s.a)(Object(s.a)({},e),{},{winners:t.payload});case o.SET_FIELD_ARRAY:return Object(s.a)(Object(s.a)({},e),{},{field:t.payload});case o.START_GAME:return Object(s.a)(Object(s.a)({},e),{},{isGameStart:!0});case o.FINISH_GAME:return Object(s.a)(Object(s.a)({},e),{},{isGameFinish:!0,isGameStart:!1,winner:t.payload});case o.SET_GAME_PERMISSION:return Object(s.a)(Object(s.a)({},e),{},{isGameFinish:!1,winner:""});case o.CLICK_SQUARE:return e.field[t.payload].isBlueSquare?Object(s.a)(Object(s.a)({},e),{},{field:e.field.map((function(e,a){return a===t.payload?Object(s.a)(Object(s.a)({},e),{},{isBlueSquare:!1,isGreenSquare:!0,disabled:!0}):e}))}):e;case o.SET_SQUARE_RED:return Object(s.a)(Object(s.a)({},e),{},{field:e.field.map((function(e){return e.id===t.payload?Object(s.a)(Object(s.a)({},e),{},{isBlueSquare:!1,isRedSquare:!0,isDisabled:!0}):e}))});case o.SET_SQUARE_BLUE:return Object(s.a)(Object(s.a)({},e),{},{field:e.field.map((function(e){return e.id===t.payload?Object(s.a)(Object(s.a)({},e),{},{isBlueSquare:!0,isRedSquare:!1,isAvailable:!1}):e}))});default:throw new Error}},d=a(16),m=a(11),f=a(127),S=a(136),b=a(130),p=a(32),_=a.n(p),O=a(39),g=a.n(O),T=(a(89),_.a.create({baseURL:"https://starnavi-frontend-test-task.herokuapp.com/"}));a(90);var y=a(57),j=a.n(y),A=function(e){var t=e.isGreenSquare,a=e.isRedSquare,n=e.isBlueSquare,r=e.onClick,c=e.size,l=j()({btn:!0,"btn-blue":n,"btn-red":a,"btn-green":t,"btn-small":5===c,"btn-medium":10===c,"btn-large":15===c});return i.a.createElement("button",{onClick:r,className:l})},R=Object(f.a)((function(e){return{center:{margin:"0 auto"}}}));var v=function(e){var t=e.handleCkickSquare,a=e.size,c=e.field,l=Object(r.useState)(window.innerWidth>576),s=Object(n.a)(l,2),o=s[0],u=s[1],E=R(),d=function(){u(window.innerWidth>576)};Object(r.useEffect)((function(){return window.addEventListener("resize",d),function(){return window.removeEventListener("resize",d)}}));var m=Object(r.useMemo)((function(){return c.map((function(e,n){return(n+1)%a===0?i.a.createElement(i.a.Fragment,{key:e.id},i.a.createElement(A,Object.assign({key:e.id},e,{size:a,onClick:function(){return t(n)}})),i.a.createElement("p",null)):i.a.createElement(A,Object.assign({size:a,key:e.id},e,{onClick:function(){return t(n)}}))}))}),[c,a,t]),f=Object(r.useMemo)((function(){return c.map((function(e,n){return i.a.createElement(i.a.Fragment,{key:e.id},i.a.createElement(A,Object.assign({key:e.id},e,{size:a,onClick:function(){return t(n)}})))}))}),[c,t,a]),S=Object(r.useMemo)((function(){return o||15!==a?m:f}),[o,a,f,m]);return i.a.createElement(b.a,{classes:{item:E.center},item:!0},i.a.createElement("div",null," ",S))};a(94);var h=function(e){var t=e.winner;return i.a.createElement("div",{className:"leaders_item"},i.a.createElement("div",{className:"leaders_item-row"},i.a.createElement("p",null," ",t.winner),i.a.createElement("p",null,t.date)))},I=function(e){var t=e.winners;return i.a.createElement("div",{className:"leaders"},i.a.createElement("h1",{className:"leaders_title"},"Leader Board"),t&&t.map((function(e,t){return i.a.createElement(h,{key:e.id,winner:e})})))},w=a(132),M=a(138),G=a(137),D=a(134),k=a(140),C=a(141),N=a(135),x=a(40),L=a.n(x),U=Object(f.a)((function(e){return{formControl:{width:"100%"},input:{padding:"23px 12px 6px",minWidth:"145px",textAlign:"left"},label:{transform:"translate(12px, 18px) scale(1)"},button:Object(m.a)({padding:"12px 50px",color:"#fff",backgroundColor:L.a[800],"&:hover":{backgroundColor:L.a[900]}},e.breakpoints.down("md"),{width:"100%"}),buttonDisabled:{backgroundColor:"#7B8D93 !important",color:"#fff !important"}}}));var F=function(e){var t=e.setGameMode,a=e.settings,n=e.mode,r=e.isGameStart,c=e.isGameFinish,l=e.user,s=e.dispatch,u=U();return i.a.createElement(i.a.Fragment,null,i.a.createElement(b.a,{item:!0,xs:12,sm:6,lg:4},i.a.createElement(w.a,{variant:"filled",className:u.formControl},i.a.createElement(M.a,{classes:{root:u.label},id:"select-mode-label"},"Pick game mode"),i.a.createElement(G.a,{input:i.a.createElement(D.a,{classes:{input:u.input}}),labelId:"select-mode-label",id:"select-mode",value:n,label:"Pick game mode",disabled:r,onChange:function(e){return t(e.target.value)}},a&&Object.keys(a).map((function(e,t){return i.a.createElement(k.a,{key:e,value:e},e)}))))),i.a.createElement(b.a,{xs:12,sm:6,item:!0,lg:4},i.a.createElement(w.a,{className:u.formControl},i.a.createElement(C.a,{error:l.length>=10,size:"small",label:"Enter your name",variant:"filled",onChange:function(e){return s({type:o.SET_USER,payload:e.target.value})},disabled:r,value:l,helperText:"Max 10 length"}))),i.a.createElement(b.a,{xs:12,sm:6,md:12,item:!0,justify:"center",container:!0,lg:4},i.a.createElement(N.a,{onClick:function(){return s({type:o.START_GAME})},classes:{root:u.button,disabled:u.buttonDisabled,contained:u.buttonDisabled},color:"primary",className:u.button,disabled:!n||!l||r||l.length>=10},c?"Play again":"Play")))},q=(a(95),new Array(10).fill("element"));function B(){return i.a.createElement("div",{className:"loader"},q&&q.map((function(e,t){return i.a.createElement("span",{key:t,className:"loader-block"})})))}var Q=Object(f.a)((function(e){return{mainGrid:Object(m.a)({padding:e.spacing(1),border:"2px solid #E7E7E9",minHeight:"100vh",paddingTop:"10%"},e.breakpoints.up("md"),{padding:e.spacing(6)})}})),z=function(e){for(var t=[],a=0;a<e*e;a++){var n={id:a,isGreenSquare:!1,isRedSquare:!1,isBlueSquare:!1,isAvailable:!0,isDisabled:!1};t.push(n)}return t};var P=function(){var e=Q(),t=Object(r.useContext)(u),a=t.state,n=t.dispatch,c=a.settings,l=a.isGameStart,s=a.size,E=a.field,m=a.delay,f=a.isGameFinish,p=a.winner,O=a.user,y=a.mode,j=a.winners,A=a.isLoading;Object(r.useEffect)((function(){n({type:o.REQUEST_DATA}),_.a.all([T.get("/game-settings"),T.get("/winners")]).then(_.a.spread((function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];var r=t[0],i=t[1];n({type:o.SET_SETTINGS,payload:{settings:r.data,winners:i.data.reverse()}})}))).catch((function(e){n({type:o.ERROR_DATA}),g.a.fire({title:"Error!",text:"We are sorry! Something go wrong! Try later!",icon:"error",confirmButtonText:"Cool"})}))}),[n]);var R=Object(r.useCallback)((function(e){n({type:o.SET_MODE,payload:e}),f&&n({type:o.SET_GAME_PERMISSION})}),[n,f]),h=Object(r.useCallback)((function(e){n({type:o.CLICK_SQUARE,payload:e})}),[n]);Object(r.useEffect)((function(){if(s){var e=z(s);n({type:o.SET_FIELD_ARRAY,payload:e})}}),[s,n]),Object(r.useEffect)((function(){if(l&&f){var e=z(s);n({type:o.SET_FIELD_ARRAY,payload:e}),n({type:o.SET_GAME_PERMISSION,payload:""})}}),[l,s,f,n]),Object(r.useEffect)((function(){var e;if(l&&!f){e=setInterval((function e(){var t=Object(d.a)(E),a=t.filter((function(e){return e.isBlueSquare})),r=t.filter((function(e){return e.isGreenSquare})),i=t.filter((function(e){return e.isRedSquare})),c=t.filter((function(e){return e.isAvailable}));if(a.length){var l=a[0].id;n({type:o.SET_SQUARE_RED,payload:l})}if(r.length===Math.round(s*s/2))clearInterval(e),n({type:o.FINISH_GAME,payload:O});else if(i.length===Math.round(s*s/2))clearInterval(e),n({type:o.FINISH_GAME,payload:"Computer"});else if(c.length){var u=c[Math.floor(Math.random()*c.length)].id;n({type:o.SET_SQUARE_BLUE,payload:u})}}),m)}return function(){clearTimeout(e)}}),[l,f,s,n,O,m,E]),Object(r.useEffect)((function(){if(f){var e=function(){var e=new Date,t=e.toLocaleDateString("en-US",{month:"long",year:"numeric"});return"".concat(e.getHours(),":").concat((e.getMinutes()<10?"0":"")+e.getMinutes(),"; ").concat(("0"+e.getDate()).slice(-2)," ").concat(t)}();(function(e,t){return T.post("/winners",{winner:e,date:t})})(p,e).then((function(e){return n({type:o.SET_WINNERS,payload:e.data.reverse()})})).catch((function(){g.a.fire({title:"Can't get winners!",text:"Try it later",icon:"error",confirmButtonText:"Cool"})}))}}),[f,n,p]);var w=Object(r.useMemo)((function(){return i.a.createElement(F,{settings:c,setGameMode:R,mode:y,isGameStart:l,isGameFinish:f,dispatch:n,user:O})}),[c,R,y,l,f,O,n]),M=Object(r.useMemo)((function(){return i.a.createElement(I,{winners:j})}),[j]),G=Object(r.useMemo)((function(){return i.a.createElement(v,{size:s,field:E,handleCkickSquare:h,dispatch:n})}),[h,n,s,E]);return i.a.createElement(S.a,{maxWidth:"xl"},i.a.createElement("main",null,A?i.a.createElement(B,null):i.a.createElement(b.a,{className:e.mainGrid,container:!0,direction:"row",alignItems:"flex-start",spacing:2},i.a.createElement(b.a,{justify:"center",container:!0,item:!0,spacing:2,alignItems:"flex-start",md:6},w,i.a.createElement(b.a,{item:!0,xs:12},p&&i.a.createElement("h3",{style:{textAlign:"center"}}," ",p," win! ")),G),i.a.createElement(b.a,{container:!0,alignItems:"center",item:!0,md:6},M))))},W=function(){var e=Object(r.useContext)(u),t=Object(r.useReducer)(E,e),a=Object(n.a)(t,2),c=a[0],l=a[1];return i.a.createElement(u.Provider,{value:{state:c,dispatch:l}},i.a.createElement(P,null))};l.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(W,null)),document.getElementById("root"))}},[[66,1,2]]]);
//# sourceMappingURL=main.1ff8d2d2.chunk.js.map